---
name: report-assembler
description: 投资分析报告自动组装器。将5个eco-tech skills的输出自动组装为完整投资分析报告，执行交叉验证、冲突标记、质量检查和格式统一。
---

# 报告自动组装器 v1.0

## 触发条件

所有skills执行完毕后自动触发，或用户手动请求"组装报告"。

## 组装流程

### Step 1: 收集skill输出

```yaml
输入检查:
  必须存在:
    - lcoe-analyzer输出 (成本分析)
    - tech-maturity-assessor输出 (技术评估)
    - carbon-footprint-calculator输出 (碳足迹)
    - policy-impact-assessor输出 (政策评估)
    - green-finance-evaluator输出 (绿色金融)
  缺失处理:
    1个缺失: 警告+继续组装（标注缺失章节）
    2个以上: 停止组装→建议重新执行缺失skills
```

### Step 2: 交叉验证

```yaml
一致性检查矩阵:
  LCOE vs 技术:
    检查: "技术降本预测是否与LCOE趋势一致？"
    冲突处理: 标注分歧+两种结论并列

  碳足迹 vs 政策:
    检查: "碳排放数据是否与碳税影响计算一致？"
    冲突处理: 以碳足迹实测数据为准

  政策 vs 绿色金融:
    检查: "政策风险评级是否与ESG融资评估一致？"
    冲突处理: 标注不同视角+综合判断

  技术 vs LCOE:
    检查: "TRL评估是否支持LCOE预测的成本路径？"
    冲突处理: 以技术实际参数为准

冲突标记格式:
  "⚠️ 数据分歧: [Skill A]认为X，[Skill B]认为Y。
   分析: [分歧原因]
   建议: [采纳哪个/两者并列]"
```

### Step 3: 报告章节编排

```markdown
# {公司名} 生态科技投资分析报告
> 生成日期: {日期} | 分析框架: eco-tech v19.14 | 5-Skill联合分析

---

## 执行摘要（报告组装器生成）
- 一句话投资论点
- 综合评级: [S/A/B/C/D]
- 核心数据看板（3-5个关键数字）
- Go/No-Go建议

## 第一章: 成本竞争力分析
> 来源: lcoe-analyzer
[整合LCOE分析输出]

## 第二章: 技术成熟度与创新能力
> 来源: tech-maturity-assessor
[整合技术评估输出]

## 第三章: 碳足迹与环境影响
> 来源: carbon-footprint-calculator
[整合碳足迹输出]

## 第四章: 政策环境与监管风险
> 来源: policy-impact-assessor
[整合政策评估输出]

## 第五章: 绿色金融与ESG评估
> 来源: green-finance-evaluator
[整合绿色金融输出]

## 第六章: 综合投资分析（报告组装器生成）

### 6.1 五维雷达图
| 维度 | 评级 | 得分(1-10) | 权重 | 加权分 |
|------|------|-----------|------|-------|
| LCOE竞争力 | {rating} | {score} | 25% | {w_score} |
| 技术成熟度 | {rating} | {score} | 25% | {w_score} |
| 碳风险控制 | {rating} | {score} | 15% | {w_score} |
| 政策环境 | {rating} | {score} | 20% | {w_score} |
| 绿色金融 | {rating} | {score} | 15% | {w_score} |
| **综合** | **{rating}** | **{total}** | 100% | **{final}** |

### 6.2 交叉验证结果
[Step 2交叉验证的结论汇总]
[标注所有数据分歧和解决方案]

### 6.3 Kill Switch汇总表
| # | 风险事件 | 触发条件 | 概率 | 来源Skill | 行动 |
|---|---------|---------|------|----------|------|
[汇总5个skills的所有Kill Switch]

### 6.4 投资建议
- **建议**: [强烈关注/关注/中性/谨慎/回避]
- **核心逻辑**:
  1. [来自LCOE的论据]
  2. [来自技术的论据]
  3. [来自政策的论据]
- **主要风险**:
  1. [最高概率风险]
  2. [最高影响风险]
  3. [最易忽视风险]
- **建议仓位**: X% (基于综合评级)
- **时间框架**: [短期/中期/长期]

### 6.5 可验证预测
| # | 预测内容 | 概率 | 验证时间 | 触发条件 | 来源 |
|---|---------|------|---------|---------|------|
[汇总所有skills的可验证预测]

## 数据质量声明（报告组装器生成）

### 数据来源统计
| 质量等级 | 数据点数 | 占比 | 达标? |
|---------|---------|------|------|
| A级 | {n} | {pct}% | {yes/no} |
| B级 | {n} | {pct}% | {yes/no} |
| C级以下 | {n} | {pct}% | {yes/no} |

### 数据缺口
[列出未获取到的关键数据+替代方案]

### 分析局限性
[列出本次分析的主要局限]

## 免责声明
本报告仅供投资研究参考，不构成任何投资建议。投资者应独立判断并承担投资风险。
数据截止日期: {日期}。过往表现不代表未来收益。
```

### Step 4: 质量门控

```yaml
最终质量检查:
  字数检查:
    快速扫描: ≥3,000字
    深度分析: ≥60,000×行业系数
    未达标: 标注缺失章节+建议补充

  深度检查:
    每章平均: ≥L3.5
    核心章节: ≥L4
    未达标: 标记需要加深的章节

  完整性检查:
    - [ ] 5个skill输出全部整合
    - [ ] 交叉验证完成
    - [ ] Kill Switch汇总完整
    - [ ] 数据质量声明完整
    - [ ] 免责声明存在
    - [ ] 可验证预测≥15个

  一致性检查:
    - [ ] 综合评级与各章评级逻辑一致
    - [ ] 投资建议与风险分析不矛盾
    - [ ] 数据在各章间引用一致
```

## 输出格式

```yaml
文件输出:
  报告文件: "reports/{公司代码}/{公司代码}_eco_tech_analysis_{日期}.md"
  数据附件: "reports/{公司代码}/data_{日期}.yaml"
  质量报告: "reports/{公司代码}/quality_{日期}.md"

命名规范:
  - 使用股票代码（大写）
  - 日期格式: YYYY-MM-DD
  - 自动创建公司目录
```
