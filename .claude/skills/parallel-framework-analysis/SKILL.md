# /parallel-analysis - 半导体并行Agent分析技能

## 触发命令
`/parallel-analysis [公司代码]`
`/parallel-analysis [多个公司代码]`

## 功能描述
利用Claude Code的Task Agent能力，并行执行半导体多维度分析：
- 同时启动5个独立分析agent（五引擎）
- 各agent专注单一维度深度分析
- 协调agent汇总综合结论
- **TSM验证基准: 从70分钟缩短到20分钟，节省71%**

## 并行分析架构

```
                    ┌─────────────────────┐
                    │   协调Agent (Main)   │
                    │  - 任务分发          │
                    │  - 进度监控          │
                    │  - 结果汇总          │
                    └──────────┬──────────┘
                               │
           ┌───────────────────┼───────────────────┐
           │                   │                   │
    ┌──────▼──────┐     ┌──────▼──────┐     ┌──────▼──────┐
    │  Agent 1    │     │  Agent 2    │     │  Agent 3    │
    │ 周期分析    │     │ 股权结构    │     │ 聪明钱追踪  │
    │ ~15分钟     │     │ ~12分钟     │     │ ~15分钟     │
    └──────┬──────┘     └──────┬──────┘     └──────┬──────┘
           │                   │                   │
    ┌──────▼──────┐     ┌──────▼──────┐     ┌──────▼──────┐
    │  Agent 4    │     │  Agent 5    │     │  汇总Agent  │
    │ 信号监控    │     │ 预测市场    │     │  综合报告   │
    │ ~10分钟     │     │ ~18分钟     │     │  ~5分钟     │
    └─────────────┘     └─────────────┘     └─────────────┘
```

## 执行流程

### Step 1: 并行任务规划
```yaml
输出格式:
  🚀 半导体并行分析启动：[公司名称] ([代码])

  📊 并行任务分配：

  Agent 1: 行业周期分析 (Explore agent)
    - 目标: AI超级周期Stage定位 + 拐点概率 + 6层雷达
    - 预计时长: 15分钟 (TSM基准)
    - 独立运行: ✅

  Agent 2: 股权结构分析 (Explore agent)
    - 目标: 稀缺性倍数 + 技术重置成本 + 地缘壁垒
    - 预计时长: 12分钟 (TSM基准)
    - 独立运行: ✅

  Agent 3: 聪明钱追踪 (Explore agent)
    - 目标: 巴菲特逻辑 + 产业资本 + 机构共识度
    - 预计时长: 15分钟 (TSM基准)
    - 独立运行: ✅

  Agent 4: 信号监控 (Explore agent)
    - 目标: 五级预警 + 触发条件 + 历史准确率
    - 预计时长: 10分钟 (TSM基准)
    - 独立运行: ✅

  Agent 5: 预测市场分析 (Explore agent)
    - 目标: 概率矩阵 + PPDA背离 + PMSI指数
    - 预计时长: 18分钟 (TSM基准, 最复杂)
    - 独立运行: ✅

  ⏱️ 顺序执行预计: 70分钟
  ⚡ 并行执行预计: 20分钟 (节省71%)

  ❓ 确认启动并行分析？
```

### Step 2: 并行Agent启动
使用Task tool同时启动5个Explore agent，每个agent独立运行。

### Step 3: 进度监控
```yaml
实时状态显示:
  📊 半导体并行分析进度：

  Agent 1 [周期分析]   ████████░░ 80%  AI超级周期定位中...
  Agent 2 [股权结构]   ██████████ 100% ✅ 稀缺性倍数计算完成
  Agent 3 [聪明钱]     ███████░░░ 70%  巴菲特逻辑解码中...
  Agent 4 [信号监控]   ██████████ 100% ✅ 6层雷达扫描完成
  Agent 5 [预测市场]   █████░░░░░ 50%  PPDA背离分析中...

  ⏱️ 已用时间: 12分钟 | 预计剩余: 8分钟
  📊 TSM基准: 20分钟 | 当前预估: 20分钟 ✅
```

### Step 4: 结果汇总
```yaml
汇总流程:
  1. 等待所有agent完成
  2. 收集各agent输出
  3. 交叉验证一致性（特别关注周期vs概率匹配）
  4. 识别分歧点（地缘风险评估常有分歧）
  5. 生成综合报告

输出格式:
  ✅ 半导体并行分析完成！

  📊 五引擎分析结果：

  【周期分析】
  - Stage: [定位] | 拐点概率: [%]
  - 6层雷达: [综合状态]

  【股权结构】
  - 稀缺性倍数: [x] | 控制权价值: [高/中/低]
  - 地缘壁垒: [评级]

  【聪明钱】
  - 机构共识: [%] | 信心等级: [A/B/C]
  - 关键持仓逻辑: [摘要]

  【信号监控】
  - 预警状态: [绿/黄/红]
  - 潜在触发: [数量] | 最近风险: [评级]

  【预测市场】
  - PMSI指数: [值] | 主要背离: [事件] ([%])
  - 套利机会: [存在/不存在]

  🔍 一致性检查：
  [各维度是否方向一致，分歧点说明]

  📝 综合结论：
  [基于5维度汇总的初步投资判断]
```

## 半导体专用并行场景

### 场景1: 单公司五引擎并行
```
/parallel-analysis NVDA
```
同时启动5个引擎，20分钟完成完整分析

### 场景2: 代工厂对比分析
```
/parallel-analysis TSM UMC SMIC
```
每公司一个agent，并行分析后输出代工厂对比（制程+产能+地缘）

### 场景3: AI芯片生态扫描
```
/parallel-analysis NVDA AMD AVGO MRVL
```
并行扫描AI芯片设计公司，输出AI曝光度+技术路线对比

### 场景4: 设备厂商周期对比
```
/parallel-analysis ASML LRCX AMAT KLA
```
并行分析设备订单周期+先行指标对比

## 与阶段管理的配合

```yaml
半导体深度分析中的并行优化:

阶段2 (周期+数据雷达) - 核心并行阶段:
  启动五引擎并行 → 节省70%
  自动触发: /parallel-analysis [公司代码]

阶段3 (深度分析) - 可并行:
  Agent A: 护城河分析
  Agent B: 估值建模
  Agent C: 竞争对手分析
  节省时间: 50%
```

## 使用限制

```yaml
并行agent数量:
  推荐: 3-5个
  最大: 5个
  原因: 太多并行增加协调复杂度

适用场景:
  ✅ 五引擎并行 (互不依赖)
  ✅ 多公司对比 (相同框架)
  ✅ 多数据源收集 (WSTS+SIA+TrendForce)

不适用场景:
  ❌ 周期定位→估值计算 (有依赖)
  ❌ 风险评估→Kill Switch设置 (有依赖)
  ❌ 简单单一任务
```

## 版本
v1.0-半导体 - 2026-02-06
TSM验证基准: 70分钟→20分钟 (节省71%)
