# Agent 8: 综合排序引擎方法论

**版本**: 2.0  
**日期**: 2026-01-26

---

## 1. 设计原则

1. **Sharpe是核心筛选轴** - 用户硬性要求，权重30%
2. **尾部风险是硬性约束** - MDD <= -30%，不可妥协
3. **基本面质量是必要条件** - 得分 >= 60，确保公司质量
4. **估值是加分项** - 低估股票获得额外加分
5. **SEC信号是验证因子** - 辅助验证，非决定性因素

## 2. 评分维度与权重

| 维度 | 权重 | 数据来源 | 说明 |
|------|------|----------|------|
| Sharpe得分 | 30% | 3年历史价格 | 风险调整收益核心指标 |
| 尾部风险得分 | 15% | 3年最大回撤 | 衡量极端风险 |
| 基本面得分 | 25% | 财务报表 | 现金流、ROIC、护城河 |
| 估值得分 | 20% | 估值模型 | DCF、历史分位、同业对比 |
| SEC信号得分 | 10% | SEC文件 | 内部人交易、机构持仓 |

## 3. 得分计算方法

### 3.1 Sharpe得分 (0-100)

```
Sharpe < 0:      0分
Sharpe 0-0.5:    线性映射到 0-30分
Sharpe 0.5-1.0:  线性映射到 30-60分
Sharpe 1.0-2.0:  线性映射到 60-100分
Sharpe >= 2.0:   100分
```

### 3.2 尾部风险得分 (0-100)

```
MDD >= -10%:     100分
MDD -10% ~ -20%: 线性映射到 80-100分
MDD -20% ~ -30%: 线性映射到 60-80分
MDD -30% ~ -50%: 线性映射到 20-60分
MDD < -50%:      0-20分
```

### 3.3 综合得分计算

```
Composite_Score = 
  Sharpe_Score × 30% +
  Tail_Risk_Score × 15% +
  Fundamental_Score × 25% +
  Valuation_Score × 20% +
  SEC_Signal_Score × 10%
```

## 4. 硬性约束

| 约束 | 阈值 | 说明 |
|------|------|------|
| 最大回撤 | -50% | 超过此值则排除 |
| 基本面得分 | >= 50.0 | 低于此值则排除 |
| Sharpe Ratio | >= 0.3 | 低于此值则排除 |
| 市值 | >= $500M | 低于此值则排除 |
| 单行业最大 | 4 只 | 分散化约束 |

## 5. 排序流程

```
1. 加载各维度数据 (风险/基本面/估值/SEC信号)
2. 计算各维度标准化得分 (0-100)
3. 应用硬性约束过滤不合格股票
4. 计算加权综合得分
5. 按综合得分降序排序
6. 应用行业分散化约束
7. 生成Top 20名单
```

## 6. 输出文件

| 文件 | 说明 |
|------|------|
| `top_20_results.csv` | Top 20排名结果 |
| `top_20_detailed.md` | Top 20详细报告 |
| `exclusion_summary.csv` | 被排除股票及原因 |
| `sector_distribution.md` | 行业分布分析 |
| `ranking_methodology.md` | 本方法论文档 |
| `ranking_report.json` | 完整JSON报告 |
