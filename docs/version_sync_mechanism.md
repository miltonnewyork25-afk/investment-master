# 🔄 版本同步机制 v1.0 - 半导体Worktree适配版

**创建时间**: 2026年2月6日
**源文件**: 主分支 `docs/version_sync_mechanism.md`
**适用版本**: v20.0-半导体
**维护状态**: 活跃

---

## 概述

建立主分支(v20.0)与半导体worktree(v20.0-半导体)之间的版本同步机制，确保：
1. **通用突破及时普及** - 在半导体worktree中验证的突破性改进能及时同步到主分支
2. **半导体专业优势保持** - 半导体worktree保持深度专业化配置
3. **版本分化有效避免** - 防止配置文件版本分化导致的能力退化
4. **合并决策规范执行** - 建立清晰的合并vs保留决策规则

---

## 三层版本管理架构

```
主分支 (v20.0)：通用预测市场增强框架
    ↓ 通用改进同步
半导体Worktree (v20.0-半导体)：半导体专业化配置
    ↓ 实例化
项目实例：具体公司分析报告 (TSM/NVDA/AMD等)
```

---

## 半导体同步决策矩阵

### 应该同步到主分支的改进

| 改进类型 | 判断标准 | 半导体worktree例子 |
|---------|---------|------------------|
| **算法突破** | 适用所有行业 | PPDA算法优化、PMSI构建方法改进 |
| **质量标准升级** | 普遍提升分析质量 | L6深度等级定义、12重Kill Switch框架 |
| **框架创新** | 方法论突破 | 五引擎协同验证方法、并行Agent模式 |
| **数据源扩展** | 增强所有分析 | 新预测市场平台接入标准 |
| **Bug修复** | 影响核心功能 | 背离度计算修正、PMSI公式修正 |

### 应该保留在半导体worktree的配置

| 配置类型 | 判断标准 | 具体配置 |
|---------|---------|---------|
| **行业复杂度系数** | 半导体特有 | ×2.0 (主分支通用为×1.0基础) |
| **PMSI权重** | 半导体特化 | 地缘40%+技术30%+需求20%+供应链10% |
| **Kill Switch阈值** | 半导体特有风险 | 台海25%、制裁45%等 |
| **6层周期雷达** | 半导体独有分析 | Layer 0-5信号配置 |
| **子行业分类** | 半导体专有 | 代工/设计/设备/存储/IDM/IP |
| **地缘风险模型** | 半导体敏感 | 台海冲突情景分析 |
| **TSM校准参数** | 半导体验证数据 | 背离91.3%、PMSI 76.4等 |
| **公司配置** | 个股专用 | semiconductor_companies.yaml |

---

## 同步检查清单

### 同步前
- [ ] 确认改进已在半导体worktree中充分验证
- [ ] 评估通用适用性（是否适用于消费品/金融/科技等行业）
- [ ] 准备同步方案，标注需要泛化的部分
- [ ] 备份主分支当前配置

### 同步中
- [ ] 提取通用部分，去除半导体特有参数
- [ ] 适配主分支的通用语境
- [ ] 更新版本号和CHANGELOG
- [ ] 验证语法和逻辑一致性

### 同步后
- [ ] 在其他worktree中测试兼容性
- [ ] 确认半导体worktree不受影响
- [ ] 更新本文档的同步记录

---

## 同步记录

| 日期 | 同步方向 | 内容 | 状态 |
|------|---------|------|------|
| 2026-02-05 | 半导体→主分支 | v10.0预测市场增强框架 | 已完成 |
| 2026-02-05 | 主分支→全局 | v20.0升级 | 已完成 |
| 2026-02-06 | 主分支→半导体 | v20.0-半导体升级 (Phase 1-3) | 进行中 |

---

## 版本演进历史

```
v10.0 (2026-02-05): 预测市场增强框架首次部署，TSM报告验证成功
v20.0 (2026-02-05): 主分支全面升级，基于TSM验证经验
v20.0-半导体 (2026-02-06): 半导体worktree对齐v20.0，保留半导体DNA
  Phase 1: CLAUDE.md全面优化 ✅
  Phase 2: Skills迁移和升级 ✅
  Phase 3: 框架配置与文档 ✅
```

---

**维护说明**: 每次框架升级或同步操作后更新本文档。
