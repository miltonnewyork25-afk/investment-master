# 行业接入标准流程

> cycle-investing 框架新行业接入的标准化流程

---

## 流程概览

```
Step 1: 行业研究
    ↓
Step 2: 创建配置文件 (industry.yaml)
    ↓
Step 3: 历史回测
    ↓
Step 4: 框架优化 (v1.0 → v1.x)
    ↓
Step 5: 创建投资日志
    ↓
Step 6: 设置提醒检查点
    ↓
Step 7: 样本外验证
```

---

## Step 1: 行业研究

### 1.1 确认周期特征

| 检查项 | 说明 | 示例 |
|--------|------|------|
| 周期长度 | 完整周期通常3-7年 | 半导体4年，航运4-5年 |
| 供给滞后 | 产能扩张需要时间 | 晶圆厂1-2年，造船2-3年 |
| 需求波动 | 需求有明显周期性 | 下游CAPEX周期、贸易周期 |
| 价格信号 | 有可跟踪的价格指标 | DRAM价格、SCFI运价 |

### 1.2 收集关键数据

**必须收集**：
- [ ] 核心价格指标（类似DRAM/SCFI）
- [ ] 供给侧数据（CAPEX/订单簿）
- [ ] 估值历史区间（PE/PB分位数）
- [ ] 主要上市公司列表

**数据来源示例**：
```yaml
semicap:
  price: TrendForce DRAMeXchange
  supply: 公司财报 Memory CAPEX
  valuation: FMP API

shipping:
  price: 上海航运交易所 SCFI
  supply: Clarksons 订单簿数据
  valuation: FMP API
```

### 1.3 研究命令模板

```bash
# Web搜索
"搜索[行业名称]周期特征、先行指标、历史价格数据"

# 关键问题
1. 该行业的周期长度是多少？
2. 什么指标最能预测行业拐点？
3. 供给端的扩张/收缩周期是多长？
4. 哪些公司是行业龙头？
```

---

## Step 2: 创建配置文件

### 2.1 文件位置

```
~/.claude/skills/cycle-investing/references/[industry].yaml
```

### 2.2 配置文件模板

```yaml
# [行业名称]深度配置
# cycle-investing framework v1.0
# 创建日期: YYYY-MM-DD

industry:
  name: "[行业中文名]"
  code: "[industry_code]"
  cycle_length: X  # 年
  description: "一句话描述周期特征"

companies:
  primary:
    - symbol: XXX
      name: "公司名称"
      focus: "主营业务"
      beta: X.X
      special_factors:
        - "特殊因素1"
        - "特殊因素2"

leading_indicators:
  tier1_12_24m:  # 领先12-24个月
    - name: "指标名称"
      source: "数据来源"
      url: "数据URL"
      frequency: "更新频率"
      bullish: "看多条件"
      bearish: "看空条件"
      weight: XX%

  tier2_6_12m:  # 领先6-12个月
    - name: "..."
      # ...

valuation:
  metric: "PE"  # 或 "PB"
  historical:
    p10: X
    p25: X
    p50: X
    p75: X
    p90: X
  scoring:
    - range: [X, X]
      score: 9
      label: "深度低估"
    # ...

supply_chain:
  upstream:
    - type: "上游类型"
      companies: ["公司列表"]
  downstream:
    - type: "下游类型"
      companies: ["公司列表"]

risk_factors:
  geopolitical:
    - name: "风险名称"
      trigger: "触发条件"
      impact: "+/-X"

current_status:
  updated: "YYYY-MM-DD"
  cycle_stage: "衰退期/复苏期/扩张期/过热期"
  # ...

backtest:
  status: "待验证"
```

---

## Step 3: 历史回测

### 3.1 选择时间点

选择覆盖完整周期的5个时间点：

| 时间点 | 选择标准 |
|--------|----------|
| 1 | 周期底部/复苏早期 |
| 2 | 扩张期 |
| 3 | 过热期/顶点 |
| 4 | 衰退期 |
| 5 | 接近当前 |

### 3.2 回测模板

对每个时间点：

```markdown
### 时间点X: YYYY-MM（阶段名称）

#### 当时数据
| 指标 | 数值 | 得分 |
|------|------|------|
| 核心价格 | XXX | X |
| 供给指标 | XXX | X |
| 估值 | XXX | X |

#### 框架评估
- 周期阶段：XXX
- 先行指标得分：X
- 估值得分：X
- 背离信号：是/否
- 框架建议：买入/持有/卖出

#### 实际结果（6个月后）
- 价格变化：+/-X%
- 预测结果：✅ 正确 / ❌ 错误 / ⚠️ 部分正确
```

### 3.3 计算准确率

```
初版准确率 = 正确预测数 / 总预测数
```

---

## Step 4: 框架优化

### 4.1 问题诊断

分析每个错误预测：
1. 错在哪里？
2. 缺少什么规则？
3. 哪个权重不合理？

### 4.2 制定特殊规则

参考已有行业的特殊规则：

| 行业 | 特殊规则 |
|------|----------|
| 半导体 | 背离信号检测、动态权重 |
| 航运 | 订单簿预警、极端悲观溢价、地缘过滤、PE陷阱 |

### 4.3 更新配置文件

将优化后的规则加入 `[industry].yaml`：

```yaml
[industry]_rules_v1_1:
  rule_name:
    trigger: "触发条件"
    adjustment: +/-X
    description: "规则说明"
```

---

## Step 5: 创建投资日志

### 5.1 文件位置

```
~/投资大师/journals/[SYMBOL]/YYYY-MM-DD.md
```

### 5.2 日志模板

参考 `references/investment-journal-template.md`

### 5.3 必填内容

- [ ] 评估时数据
- [ ] 框架评分计算过程
- [ ] 投资建议
- [ ] 3个月回顾占位符
- [ ] 6个月回顾占位符

---

## Step 6: 设置提醒检查点

### 6.1 更新 REMINDERS.md

在 `REMINDERS.md` 中添加：

1. **当前跟踪行业表格**：新增行业行
2. **月度检查**：新增行业检查任务
3. **3个月回顾**：新增行业回顾任务
4. **6个月验证**：新增行业验证任务
5. **持续监控指标**：新增行业监控指标
6. **版本迭代记录**：新增行业版本表

### 6.2 检查点模板

```markdown
### [行业名称]

**数据回测任务**：
- [ ] 获取[股票列表]最新股价
- [ ] 更新[核心指标]
- [ ] 检查[特殊风险]

**策略反思任务**：
- [ ] [行业特定问题1]
- [ ] [行业特定问题2]

**调用命令**：
\`\`\`
请用cycle-investing框架（[industry]配置）进行月度检查
\`\`\`
```

---

## Step 7: 样本外验证

### 7.1 锁定参数

完成回测优化后：
- 锁定v1.x版本参数
- 不再基于历史数据调整
- 用未来数据验证

### 7.2 验证周期

| 节点 | 时间 | 任务 |
|------|------|------|
| 1个月 | T+1M | 月度检查 |
| 3个月 | T+3M | 首次回顾 |
| 6个月 | T+6M | 关键验证 |
| 12个月 | T+12M | 年度总结 |

### 7.3 版本升级触发条件

```
如果满足以下任一条件，启动v1.x+1升级：
1. 样本外准确率 < 70%
2. 连续3次以上方向预测错误
3. 发现重大系统性偏差
```

---

## 已完成行业清单

| 行业 | 配置文件 | 版本 | 状态 | 准确率 |
|------|----------|------|------|--------|
| 半导体设备 | `semicap.yaml` | v5.0 | 样本外验证中 | 93% |
| 集装箱航运 | `shipping.yaml` | v1.1 | 样本外验证中 | 80%→100%* |
| 能源 | `energy.yaml` | - | 待创建 | - |
| 化工 | `chemicals.yaml` | - | 待创建 | - |
| 养殖 | `livestock.yaml` | - | 待创建 | - |

---

## 快速命令

```bash
# 初始化新行业
"请用cycle-investing框架初始化[行业名称]，按照标准流程创建配置文件"

# 进行回测
"请对[行业]进行5点历史回测，覆盖完整周期"

# 创建投资日志
"请为[股票代码]创建投资日志，使用v1.x框架评分"

# 更新提醒
"请更新REMINDERS.md，添加[行业]的检查点"
```

---

*创建日期：2026-01-22*
*最后更新：2026-01-22*
