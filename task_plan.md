# Task Plan: 全面技能审计与投资框架集成 v2.0

## Goal
全面审计新增的MCP数据源和优化后的skills，创建统一的investment-logic-toolkit.skill.md，重新规划公司调研维度和Agent策略，实现从传统3层分析到智能5层分析的升级。

## Current Phase
Phase 2 - 证据驱动工具包设计

## Phases

### Phase 1: 新增内容全面审计 ✅ COMPLETED
- [x] **MCP数据源验证**: 10个工具全部可用，识别100baggers/FMP/Polymarket三大核心数据源
- [x] **Skills生态分析**: 发现14个Skills协同体系，6核心+4专业+4增强
- [x] **温度计策略解读**: 理解Core层3维算法，验证与MCP工具完美匹配
- [x] **关键洞察提炼**: 设计5层分析架构，规划5个新Agent角色
- **Status:** complete
- **成果**: findings.md (完整审计报告) + progress.md (进展日志)

### Phase 2: 统一工具包设计 🔄 IN_PROGRESS
- [ ] **toolkit架构设计**: 基于5层分析框架设计统一接口
- [ ] **触发逻辑编写**: 整合温度计+orchestrator+data-prefetch的调用链
- [ ] **决策树创建**: 从股票输入到投资建议的完整流程图
- [ ] **兼容性验证**: 确保与现有Tier 1/2/3体系无缝融合
- **Status:** in_progress
- **当前任务**: 正在设计investment-logic-toolkit.skill.md结构

### Phase 3: Agent协作优化
- [ ] **Agent角色定义**: 温度监控/逻辑验证/数据整合/生态扫描/对抗审查5个Agent
- [ ] **并行策略设计**: 避免重复计算，优化Agent间协作效率
- [ ] **数据流优化**: 设计14个预取文件的智能缓存和更新策略
- [ ] **错误处理机制**: 3层容错在Agent协作中的具体实现
- **Status:** pending

### Phase 4: 实战验证测试
- [ ] **测试用例设计**: 选择JPM(传统银行)/SOFI(Fintech)/BRK(多元)作为测试标的
- [ ] **新旧框架对比**: 使用SOFI已有数据验证5层分析vs传统分析的差异
- [ ] **性能基准测试**: 14文件预取+5Agent并行的响应时间和准确性
- [ ] **用户体验优化**: 基于测试反馈优化工具包界面和流程
- **Status:** pending

### Phase 5: 部署和文档完善
- [ ] **框架集成部署**: 将新工具包正式集成到投资分析工作流
- [ ] **文档体系完善**: 更新CLAUDE.md，编写使用手册和最佳实践
- [ ] **培训材料制作**: 创建温度计策略和5层分析的操作指南
- [ ] **持续监控设置**: 建立框架效果跟踪和持续优化机制
- **Status:** pending

## Key Questions
1. **统一接口设计**: 如何让用户一键调用整套分析体系？
2. **温度计集成**: Core层算法如何与Tier体系最佳融合？
3. **实时监控机制**: 如何实现温度变化的自动警报？
4. **数据新鲜度管理**: 14个预取文件的智能更新策略？
5. **Agent负载均衡**: 5个Agent并行时如何避免资源冲突？

## Decisions Made
| Decision | Rationale |
|----------|-----------|
| 选择5层分析架构 | 相比传统3层，新增温度层和验证层提供更全面的投资洞察 |
| 100baggers为核心数据源 | 提供最丰富的宏观温度+38指标+杜邦分析，数据质量最高 |
| 温度计作为Tier 1前置 | 5分钟快筛功能完美匹配Tier 1的快速判断需求 |
| 保持Tier体系兼容 | 避免破坏现有工作流，新功能作为增强而非替代 |

## Errors Encountered
| Error | Attempt | Resolution |
|-------|---------|------------|
| task_plan.md内容不匹配 | 1 | 创建v2.0版本，重新设计完整的5阶段计划 |

## 核心发现总结

### 🚀 新增能力清单
1. **实时投资温度计**: 4维度实时监控(宏观/情绪/预测/机构)
2. **预测市场集成**: Polymarket事件概率的前瞻性分析
3. **Smart Money追踪**: 机构持仓变化的专业级监控
4. **全自动调研流水线**: 14文件预取+5层分析+5Agent验证
5. **第一性原理投资**: 从基础假设到投资结论的严密推理

### 📊 框架升级对比
| 维度 | 旧框架 | 新框架 | 提升倍数 |
|------|--------|--------|---------|
| 分析层次 | 3层 | 5层 | 1.7x |
| 数据源 | 主要WebSearch | 10个MCP工具 | 10x |
| 自动化程度 | 手动搜索 | 全自动预取 | ∞ |
| 实时性 | 静态分析 | 动态监控 | 实时 |
| 验证机制 | 单维度 | 多Agent交叉验证 | 5x |

### 🎯 下一步优先级
1. **立即实施**: 完成investment-logic-toolkit.skill.md设计
2. **本周内**: 使用SOFI进行新框架实战验证
3. **本月内**: 全面部署5层分析体系

## Notes
- 重点关注新旧框架的平滑过渡，避免破坏现有工作流
- 温度计策略是最大亮点，应该作为主推功能
- Agent协作的并发控制需要特别关注，避免资源竞争
- 数据预取的缓存策略直接影响用户体验