# Output Quality Principles v1.0
# 输出可读性规范 - 确保报告格式整洁、易于阅读
# 创建日期: 2026-01-31

version: "1.0"
created: "2026-01-31"

# ═══════════════════════════════════════════════════════════════
# 核心立场
# ═══════════════════════════════════════════════════════════════

core_position:
  mermaid:
    stance: "积极使用"
    minimum: "≥5个/报告"
    rationale: |
      Mermaid图是高效的模块化展示方式，可以清晰展示：
      - 产业链上下游关系
      - 竞争生态格局
      - 业务流程逻辑
      - 品类/组织架构
      应该继续大量使用，这是报告的核心可视化能力。

# ═══════════════════════════════════════════════════════════════
# 问题诊断
# ═══════════════════════════════════════════════════════════════

problem_diagnosis:
  observed_issues:
    - name: "杂乱代码片段"
      description: "报告中出现未整理的中间代码或片段"
      solution: "输出前检查代码块完整性"

    - name: "格式不整洁"
      description: "表格错位、层级混乱、段落断裂"
      solution: "遵循Markdown标准格式"

    - name: "乱码或残缺"
      description: "代码块未正确闭合，出现乱码"
      solution: "确保所有代码块有正确的开始和结束标记"

  not_a_problem:
    - "Mermaid图本身不是问题，应继续使用"
    - "产业链图、生态图谱等可视化很有价值"
    - "模块化展示是高效的表达方式"

# ═══════════════════════════════════════════════════════════════
# 可读性规范
# ═══════════════════════════════════════════════════════════════

readability_standards:

  mermaid_usage:
    requirement: "≥5个/报告"
    best_practices:
      - "每个Mermaid图有明确的标题"
      - "图后附有简要说明/解读"
      - "代码块格式完整（```mermaid ... ```）"
      - "节点标签简洁清晰"
    recommended_types:
      - "产业链定位图 (flowchart TB)"
      - "竞争生态图 (flowchart LR)"
      - "业务流程图 (flowchart)"
      - "组织架构图 (flowchart)"
      - "决策树 (flowchart)"

  markdown_format:
    headings:
      - "使用标准层级：# H1, ## H2, ### H3, #### H4"
      - "不跳级：H2下面是H3，不是H4"
      - "每个主要章节用H2"

    tables:
      - "确保表格列对齐"
      - "使用 | --- | 分隔头部和内容"
      - "避免单元格内容过长导致断行"

    code_blocks:
      - "代码块必须有语言标记（```mermaid, ```yaml等）"
      - "确保有正确的结束标记（```）"
      - "避免代码块中嵌套代码块"

    lists:
      - "有序列表用数字 1. 2. 3."
      - "无序列表用 - 或 *"
      - "嵌套列表缩进一致"

# ═══════════════════════════════════════════════════════════════
# 输出前检查清单
# ═══════════════════════════════════════════════════════════════

pre_output_checklist:

  mermaid_check:
    - "每个Mermaid代码块有 ```mermaid 开始标记"
    - "每个代码块有正确的 ``` 结束标记"
    - "节点ID没有特殊字符问题"
    - "图表后有解读说明"

  table_check:
    - "表头与内容用 | --- | 分隔"
    - "列数一致"
    - "内容不会导致格式错乱"

  structure_check:
    - "章节层级清晰递进"
    - "无孤立的标题（标题后有内容）"
    - "段落之间有适当空行"

  content_check:
    - "无未完成的句子"
    - "无乱码或特殊字符问题"
    - "数据引用格式一致"

# ═══════════════════════════════════════════════════════════════
# Mermaid图使用指南
# ═══════════════════════════════════════════════════════════════

mermaid_guide:

  产业链图:
    purpose: "展示公司在产业链中的位置和上下游关系"
    template: |
      flowchart TB
          subgraph "上游供应商"
              A[供应商A]
              B[供应商B]
          end
          subgraph "目标公司"
              C[★ 公司名 ★]
          end
          subgraph "下游客户"
              D[客户A]
              E[客户B]
          end
          A --> C
          B --> C
          C --> D
          C --> E
    notes: "用颜色和★标记目标公司，突出关键依赖关系"

  竞争格局图:
    purpose: "展示市场竞争者的相对位置"
    template: |
      flowchart LR
          subgraph "第一梯队"
              A[公司A - 30%]
              B[公司B - 25%]
          end
          subgraph "第二梯队"
              C[公司C - 15%]
          end
    notes: "按份额分层，标注关键数据"

  业务架构图:
    purpose: "展示业务板块和品类结构"
    template: |
      flowchart TB
          ROOT[公司总部]
          ROOT --> BU1[业务板块1]
          ROOT --> BU2[业务板块2]
          BU1 --> P1[产品线1]
          BU1 --> P2[产品线2]
    notes: "清晰展示层级关系"

# ═══════════════════════════════════════════════════════════════
# 版本历史
# ═══════════════════════════════════════════════════════════════

version_history:
  v1.0:
    date: "2026-01-31"
    changes:
      - "明确Mermaid图是高效展示方式，应≥5个"
      - "定义可读性规范和检查清单"
      - "提供Mermaid图使用模板"
      - "强调输出前格式检查"
