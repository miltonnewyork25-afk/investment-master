# 深度指数计算器 (Depth Index Calculator) v1.0

## 设计原理

类比来源：
- **TDD (测试驱动开发)**：先定义测试标准，再检验是否通过
- **飞行检查清单**：强制检查，不能跳过
- **学术同行评审**：明确标准，自我评审

核心思想：
- **深度不是主观感受，是可量化的**
- **每篇报告结尾必须附上Depth Index计算结果**
- **DI < 70 = 报告无效，必须返工**

---

## Depth Index (DI) 计算公式

```
DI = Σ(维度分数 × 权重)

总分：100分
及格线：70分
优秀线：85分
```

---

## 10个评分维度

### D1: 第一性原理穿透 (权重15%)

| 分数 | 标准 |
|------|------|
| 10 | 回答了存在性+不可替代性+终局三问，每问≥300字，到达人类需求根本层 |
| 7 | 回答了三问，但深度一般（100-300字） |
| 4 | 只回答了部分问题，或流于表面 |
| 0 | 没有第一性原理分析 |

**自检问题**：
- [ ] 是否回答了"公司为什么存在"？
- [ ] 是否到达了人类需求的根本层面？
- [ ] 是否回答了"如果公司消失世界损失什么"？

### D2: 护城河深度 (权重15%)

| 分数 | 标准 |
|------|------|
| 10 | 7 Powers逐一验证+强度评分+趋势分析+动态变化+具体证据 |
| 7 | 验证了主要Powers，有评分和证据 |
| 4 | 只是罗列了护城河类型，没有深度分析 |
| 0 | 没有护城河分析 |

**自检问题**：
- [ ] 是否用7 Powers逐一验证？
- [ ] 每个Power是否有强度评分(1-10)？
- [ ] 是否分析了护城河趋势（加深/变浅）？

### D3: 产品矩阵分析 (权重10%)

| 分数 | 标准 |
|------|------|
| 10 | 完整产品生命周期分析+增长驱动力+天花板+产品间关系+定价权 |
| 7 | 分析了主要产品，有生命周期和驱动力 |
| 4 | 只是列出产品收入占比 |
| 0 | 没有产品分析 |

**自检问题**：
- [ ] 是否分析了每个产品的生命周期阶段？
- [ ] 是否分析了产品间的协同/替代关系？
- [ ] 是否分析了定价权？

### D4: 竞争格局深度 (权重10%)

| 分数 | 标准 |
|------|------|
| 10 | 识别真正竞争对手+竞争对手优势分析+颠覆性威胁+竞争策略推演 |
| 7 | 分析了主要竞争对手，有优劣势对比 |
| 4 | 只是列出竞争对手名称 |
| 0 | 没有竞争分析 |

**自检问题**：
- [ ] 是否识别了"真正的"竞争对手（可能不是直觉想到的）？
- [ ] 是否分析了竞争对手在哪些维度更强？
- [ ] 是否分析了潜在的颠覆性威胁？

### D5: 分析师超越 (权重10%)

| 分数 | 标准 |
|------|------|
| 10 | ≥3位分析师框架解构+假设识别+盲区发现+明确超越点 |
| 7 | 解构了分析师框架，有盲区分析 |
| 4 | 只是罗列分析师观点和目标价 |
| 0 | 没有分析师分析 |

**自检问题**：
- [ ] 是否解构了分析师的"思维框架"（不是结论）？
- [ ] 是否找到了他们的盲区？
- [ ] 是否明确了"我比分析师多知道什么"？

### D6: 创新方法尝试 (权重10%)

| 分数 | 标准 |
|------|------|
| 10 | ≥3种非常规分析方法+有尝试过程记录+即使失败也有洞察 |
| 7 | 尝试了1-2种非常规方法 |
| 4 | 提到了创新方法但没有真正尝试 |
| 0 | 纯常规分析，无创新 |

**自检问题**：
- [ ] 是否尝试了反推估值法？
- [ ] 是否尝试了期权定价/用户价值法等非常规方法？
- [ ] 是否记录了尝试过程（即使失败）？

### D7: 跨域类比 (权重10%)

| 分数 | 标准 |
|------|------|
| 10 | ≥3个领域类比+关系结构映射（非表面相似）+新洞察 |
| 7 | 有类比但深度一般 |
| 4 | 类比只是表面相似，无深层映射 |
| 0 | 没有类比思考 |

**自检问题**：
- [ ] 是否用了生物/物理/历史/系统动力学等领域类比？
- [ ] 类比是否映射了"关系结构"而非表面特征？
- [ ] 类比是否产生了新洞察？

### D8: 反常识洞察 (权重10%)

| 分数 | 标准 |
|------|------|
| 10 | ≥3个反常识洞察+有证据链支撑+不是为了反而反 |
| 7 | 有1-2个有价值的反常识洞察 |
| 4 | 洞察是常识包装，非真正反常识 |
| 0 | 没有独特洞察 |

**自检问题**：
- [ ] 是否找到了市场共识的盲区？
- [ ] 洞察是否有证据支撑？
- [ ] 洞察是否"非显而易见"？

### D9: 数据溯源 (权重5%)

| 分数 | 标准 |
|------|------|
| 10 | 所有关键数字有[来源]标签，无"凭印象"数据 |
| 7 | 大部分数据有来源 |
| 4 | 部分数据有来源 |
| 0 | 数据来源不清 |

### D10: 估值逻辑自洽 (权重5%)

| 分数 | 标准 |
|------|------|
| 10 | SOTP估值完整+概率加权+目标价与SOTP差距<20% |
| 7 | 有SOTP但差距较大，有解释 |
| 4 | 估值方法单一或逻辑不自洽 |
| 0 | 没有估值或逻辑断裂 |

---

## Depth Index 计算模板

**必须附在每篇报告结尾**：

```markdown
---

## 深度指数自测 (Depth Index)

| 维度 | 权重 | 得分 | 加权分 | 自检通过 |
|------|------|------|--------|---------|
| D1 第一性原理 | 15% | /10 | | □ |
| D2 护城河深度 | 15% | /10 | | □ |
| D3 产品矩阵 | 10% | /10 | | □ |
| D4 竞争格局 | 10% | /10 | | □ |
| D5 分析师超越 | 10% | /10 | | □ |
| D6 创新方法 | 10% | /10 | | □ |
| D7 跨域类比 | 10% | /10 | | □ |
| D8 反常识洞察 | 10% | /10 | | □ |
| D9 数据溯源 | 5% | /10 | | □ |
| D10 估值逻辑 | 5% | /10 | | □ |
| **总计** | 100% | - | **DI = XX** | |

### 评级标准
- DI ≥ 85: ⭐⭐⭐ 优秀（可输出）
- DI 70-84: ⭐⭐ 合格（可输出）
- DI < 70: ⭐ 不合格（必须返工）

### 本报告评级: [优秀/合格/不合格]

### 薄弱维度（需改进）:
- [列出得分<7的维度]

### 返工计划（如DI<70）:
- [具体改进措施]
```

---

## 防偷懒机制

### 机制1：断言检查（Assert）

在报告开始时设置断言：

```python
# 伪代码：报告开始时的断言
assert first_principles_answered == True, "必须先完成第一性原理三问"
assert moat_7powers_verified == True, "必须完成7 Powers验证"
assert analyst_deconstructed >= 3, "必须解构≥3位分析师"
assert innovation_attempts >= 3, "必须尝试≥3种创新方法"
```

### 机制2：强制顺序

```
Phase 1: 第一性原理 → 不完成不能进入Phase 2
Phase 2: 护城河+竞争 → 不完成不能进入Phase 3
Phase 3: 数据收集 → 这是第三步，不是第一步
Phase 4: 分析师+创新 → 不完成不能进入Phase 5
Phase 5: 估值+报告
Phase 6: 深度自测 → DI<70必须返工
```

### 机制3：随机抽查问题

在分析过程中随机触发深度问题：

```yaml
random_depth_checks:
  - "你刚才说的这个结论，反面证据是什么？"
  - "如果这个假设错了，会怎样？"
  - "有没有竞争对手做得更好？为什么？"
  - "这个数据来源是什么？"
  - "顶级分析师会怎么反驳你？"
```

---

## 与现有系统整合

```
用户请求 → 自动检测触发（Layer 1）
    ↓
深度思考协议 → 过程检查点（Layer 2）
    ↓
报告输出前 → 深度指数计算（Layer 3）
    ↓
DI ≥ 70 → 输出报告
DI < 70 → 返工循环
```

---

## 版本信息

- **版本**: v1.0
- **创建日期**: 2026-01-28
- **设计原理**: TDD + 飞行检查清单 + 学术评审
- **核心思想**: 深度是可量化的，不是主观感受
