# Multi-Agent Orchestration Framework v1.0
# ä¸“ä¸šåŒ– Agent å›¢é˜Ÿç¼–æ’ç³»ç»Ÿ
# æ¥æº: OpenAI Agents SDK, Google ADK, Gartner 2026

version: "1.0"
created: "2026-01-31"
description: |
  ä»å•ä¸€å…¨èƒ½ Agent è½¬å‘ä¸“ä¸šåŒ– Agent å›¢é˜Ÿã€‚

  æ ¸å¿ƒæ´å¯Ÿ:
  "æ­£å¦‚å•ä½“åº”ç”¨è¢«åˆ†å¸ƒå¼æœåŠ¡æ¶æ„å–ä»£ï¼Œå•ä¸€å…¨èƒ½ Agent æ­£åœ¨è¢«
  ç¼–æ’çš„ä¸“ä¸šåŒ– Agent å›¢é˜Ÿå–ä»£ã€‚" â€” Gartner 2026

  ä¼˜åŠ¿:
  - æ¯ä¸ª Agent ä¸“æ³¨ä¸€ä¸ªä»»åŠ¡ï¼Œè´¨é‡æ›´é«˜
  - å¯å¹¶è¡Œæ‰§è¡Œï¼Œé€Ÿåº¦æ›´å¿«
  - æ›´å®¹æ˜“è°ƒè¯•å’Œä¼˜åŒ–
  - API è°ƒç”¨å‡å°‘ 61%ï¼ˆå¤š Agent RAG ç ”ç©¶ï¼‰

# ============================================================
# æ¶æ„æ¦‚è§ˆ
# ============================================================
architecture:
  overview: |
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                      ç”¨æˆ·è¯·æ±‚                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ğŸ­ COORDINATOR (ç¼–æ’å™¨)                                    â”‚
    â”‚  â”œâ”€ åˆ†æç”¨æˆ·æ„å›¾                                            â”‚
    â”‚  â”œâ”€ åˆ†è§£ä»»åŠ¡                                                â”‚
    â”‚  â”œâ”€ åˆ†é…ç»™ä¸“ä¸š Agent                                        â”‚
    â”‚  â””â”€ æ•´åˆç»“æœ                                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                   â”‚                   â”‚
           â–¼                   â–¼                   â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ğŸ“Š æ•°æ®Agent â”‚    â”‚ ğŸ” åˆ†æAgent â”‚    â”‚ ğŸ’° ä¼°å€¼Agent â”‚
    â”‚  è·å–æ•°æ®    â”‚    â”‚  æ·±åº¦åˆ†æ    â”‚    â”‚  ä¼°å€¼è®¡ç®—    â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚                   â”‚                   â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ğŸ“ SYNTHESIZER (ç»¼åˆå™¨)                                    â”‚
    â”‚  â””â”€ æ•´åˆå„ Agent è¾“å‡ºï¼Œç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# ============================================================
# ä¸“ä¸šåŒ– Agent å®šä¹‰
# ============================================================
specialized_agents:

  # ----------------------------------------------------------
  coordinator:
    name: "ç¼–æ’å™¨"
    role: "ä¸­å¤®è°ƒåº¦ï¼Œä»»åŠ¡åˆ†é…"
    model: "opus"

    responsibilities:
      - "è§£æç”¨æˆ·è¯·æ±‚"
      - "åˆ†è§£ä¸ºå­ä»»åŠ¡"
      - "åˆ†é…ç»™åˆé€‚çš„ Agent"
      - "ç›‘æ§æ‰§è¡Œè¿›åº¦"
      - "å¤„ç† Agent é—´ä¾èµ–"
      - "å¼‚å¸¸å¤„ç†å’Œé‡è¯•"

    handoff_rules:
      - condition: "éœ€è¦è·å–æ•°æ®"
        target: "data_agent"
      - condition: "éœ€è¦æ·±åº¦åˆ†æ"
        target: "analysis_agent"
      - condition: "éœ€è¦ä¼°å€¼è®¡ç®—"
        target: "valuation_agent"
      - condition: "éœ€è¦è¡Œä¸šçŸ¥è¯†"
        target: "industry_agent"

  # ----------------------------------------------------------
  data_agent:
    name: "æ•°æ®æ”¶é›† Agent"
    role: "è·å–å’Œå¤„ç†å„ç±»æ•°æ®"
    model: "haiku"

    capabilities:
      - "è°ƒç”¨ FMP API"
      - "è°ƒç”¨ 100baggers API"
      - "æ‰§è¡Œ WebSearch"
      - "è§£æ SEC Filings"
      - "æå–ç»“æ„åŒ–æ•°æ®"

    tools:
      - "fmp_api"
      - "100baggers_api"
      - "web_search"
      - "sec_filings"

    output_format:
      type: "structured_data"
      schema: |
        {
          "source": "api/web/filing",
          "data_level": "A/B/C/D/E",
          "timestamp": "ISO8601",
          "data": {...}
        }

  # ----------------------------------------------------------
  analysis_agent:
    name: "æ·±åº¦åˆ†æ Agent"
    role: "æ‰§è¡Œå„ç±»åˆ†ææ¡†æ¶"
    model: "sonnet"  # éœ€è¦æ¨ç†ä½†ä¸æ˜¯æœ€å¤æ‚

    capabilities:
      - "æŠ¤åŸæ²³åˆ†æ"
      - "äº§å“çŸ©é˜µåˆ†æ"
      - "å‘¨æœŸå®šä½"
      - "ç«äº‰å¯¹æ‰‹å¯¹æ¯”"
      - "ç®¡ç†å±‚è¯„ä¼°"

    frameworks:
      - "moat_deep_analysis_v1"
      - "product_matrix_v1"
      - "cycle_analysis_engine_v1"
      - "memory_competitor_matrix_v1"
      - "management_track_record_v1"

    output_format:
      type: "analysis_report"
      sections:
        - "summary"
        - "key_findings"
        - "evidence"
        - "confidence_level"

  # ----------------------------------------------------------
  valuation_agent:
    name: "ä¼°å€¼è®¡ç®— Agent"
    role: "ä¼°å€¼æ¨¡å‹å’Œè®¡ç®—"
    model: "haiku"  # ä¸»è¦æ˜¯è®¡ç®—

    capabilities:
      - "Reverse DCF"
      - "Forward SOTP"
      - "æ•æ„Ÿæ€§åˆ†æ"
      - "æƒ…æ™¯åˆ†æ"
      - "ä¼°å€¼æ¡¥æ¢"

    tools:
      - "dcf_calculator"
      - "sotp_calculator"
      - "sensitivity_matrix"

    output_format:
      type: "valuation_result"
      schema: |
        {
          "methodology": "DCF/SOTP/Comps",
          "scenarios": {
            "bull": {"value": X, "probability": Y},
            "base": {"value": X, "probability": Y},
            "bear": {"value": X, "probability": Y}
          },
          "target_price": X,
          "upside": "X%"
        }

  # ----------------------------------------------------------
  industry_agent:
    name: "è¡Œä¸šä¸“å®¶ Agent"
    role: "è¡Œä¸šç‰¹å®šçŸ¥è¯†å’Œæ¡†æ¶"
    model: "sonnet"

    specializations:
      memory:
        frameworks:
          - "memory_cycle_intelligence_v1"
          - "memory_pricing_model_v1"
          - "memory_competitor_matrix_v1"
        key_metrics:
          - "HBM ä»½é¢"
          - "DRAM/NAND ä»·æ ¼"
          - "Fab åˆ©ç”¨ç‡"

      semicap:
        frameworks:
          - "semicap_analysis"
        key_metrics:
          - "Book-to-Bill"
          - "China æ”¶å…¥å æ¯”"
          - "è®¢å• Backlog"

      foundry:
        key_metrics:
          - "äº§èƒ½åˆ©ç”¨ç‡"
          - "å…ˆè¿›åˆ¶ç¨‹å æ¯”"
          - "å®¢æˆ·é›†ä¸­åº¦"

  # ----------------------------------------------------------
  insight_agent:
    name: "æ´å¯Ÿç”Ÿæˆ Agent"
    role: "ç”Ÿæˆç‹¬ç‰¹æ´å¯Ÿå’Œåå¸¸è¯†è§‚ç‚¹"
    model: "opus"  # éœ€è¦åˆ›æ„

    capabilities:
      - "åå¸¸è¯†æ´å¯Ÿå¡ç”Ÿæˆ"
      - "å­¦æœ¯æ¡†æ¶åº”ç”¨"
      - "Reflection è‡ªæˆ‘æ‰¹è¯„"
      - "é¢„æµ‹ç”Ÿæˆ"

    output_format:
      type: "insight_cards"
      min_count: 3

  # ----------------------------------------------------------
  synthesizer:
    name: "ç»¼åˆå™¨"
    role: "æ•´åˆå„ Agent è¾“å‡º"
    model: "opus"

    responsibilities:
      - "æ•´åˆå„ Agent è¾“å‡º"
      - "æ£€æŸ¥ä¸€è‡´æ€§"
      - "å¡«è¡¥é—æ¼"
      - "ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š"
      - "è´¨é‡é—¨æ§æ£€æŸ¥"

# ============================================================
# ç¼–æ’æ¨¡å¼
# ============================================================
orchestration_patterns:

  sequential:
    name: "é¡ºåºç¼–æ’"
    description: "çº¿æ€§æµç¨‹ï¼Œé€‚åˆæœ‰ä¾èµ–çš„ä»»åŠ¡"
    flow: |
      Coordinator â†’ Data Agent â†’ Analysis Agent â†’ Valuation Agent â†’ Synthesizer

    use_when:
      - "æ ‡å‡†æ·±åº¦åˆ†æ"
      - "æ•°æ®ä¾èµ–æ˜ç¡®"

  parallel:
    name: "å¹¶è¡Œç¼–æ’"
    description: "æ— ä¾èµ–ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œ"
    flow: |
      Coordinator
          â”œâ”€â†’ Data Agent (è´¢åŠ¡æ•°æ®)
          â”œâ”€â†’ Data Agent (åˆ†æå¸ˆè§‚ç‚¹)
          â””â”€â†’ Industry Agent (è¡Œä¸šæ•°æ®)
              â”‚
              â–¼
          Analysis Agent
              â”‚
              â–¼
          Synthesizer

    use_when:
      - "æ•°æ®æ”¶é›†é˜¶æ®µ"
      - "å¤šæºä¿¡æ¯æ•´åˆ"

  hierarchical:
    name: "å±‚çº§ç¼–æ’"
    description: "å¤šå±‚çº§ç®¡ç†ï¼Œé€‚åˆå¤æ‚ä»»åŠ¡"
    flow: |
      Coordinator (L1)
          â”‚
          â”œâ”€â†’ Data Manager (L2)
          â”‚       â”œâ”€â†’ FMP Agent
          â”‚       â””â”€â†’ Web Agent
          â”‚
          â””â”€â†’ Analysis Manager (L2)
                  â”œâ”€â†’ Moat Agent
                  â””â”€â†’ Cycle Agent

    use_when:
      - "è¶…å¤§è§„æ¨¡åˆ†æ"
      - "å¤šå…¬å¸å¯¹æ¯”"

# ============================================================
# æŠ•èµ„åˆ†æä»»åŠ¡åˆ†é…
# ============================================================
investment_analysis_allocation:

  phase_1_positioning:
    coordinator: "åˆ†è§£å®šä½ä»»åŠ¡"
    data_agent:
      - "è·å–å…¬å¸åŸºç¡€ä¿¡æ¯"
      - "æ”¶é›†ç«äº‰å¯¹æ‰‹åˆ—è¡¨"
      - "è·å–ä¾›åº”é“¾ä¿¡æ¯"
    industry_agent:
      - "ç¡®å®šè¡Œä¸šåˆ†ç±»"
      - "æä¾›è¡Œä¸šèƒŒæ™¯"
    synthesizer: "ç”Ÿæˆç”Ÿæ€å›¾è°±"

  phase_2_data:
    coordinator: "åˆ†é…æ•°æ®æ”¶é›†ä»»åŠ¡"
    data_agent:
      parallel_tasks:
        - "FMP è´¢åŠ¡æ•°æ®"
        - "100baggers æŒ‡æ ‡"
        - "åˆ†æå¸ˆè§‚ç‚¹æœç´¢"
        - "SEC Filings æå–"
    industry_agent:
      - "è¡Œä¸šç‰¹å®šæ•°æ®ï¼ˆé›·è¾¾ä¿¡å·ï¼‰"

  phase_3_analysis:
    coordinator: "åˆ†é…åˆ†æä»»åŠ¡"
    analysis_agent:
      - "æŠ¤åŸæ²³åˆ†æ"
      - "äº§å“çŸ©é˜µ"
      - "å‘¨æœŸå®šä½"
    industry_agent:
      - "è¡Œä¸šä¸“ç”¨åˆ†æ"
    insight_agent:
      - "åå¸¸è¯†æ´å¯Ÿ"
      - "Reflection"
    synthesizer: "æ•´åˆåˆ†æç»“æœ"

  phase_4_decision:
    coordinator: "åˆ†é…ä¼°å€¼ä»»åŠ¡"
    valuation_agent:
      - "Reverse DCF"
      - "SOTP ä¸‰åœºæ™¯"
      - "æ•æ„Ÿæ€§åˆ†æ"
    insight_agent:
      - "Kill Switch è®¾è®¡"
      - "é¢„æµ‹ç”Ÿæˆ"
    synthesizer: "ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š"

# ============================================================
# æˆæœ¬å’Œæ•ˆç‡å¯¹æ¯”
# ============================================================
efficiency_comparison:

  single_agent:
    description: "å•ä¸€ Opus Agent"
    api_calls: 100
    total_tokens: 250000
    estimated_cost: 6.75  # USD
    execution_time: "30 min"

  multi_agent:
    description: "Multi-Agent ç¼–æ’"
    breakdown:
      coordinator:
        model: "opus"
        calls: 10
        tokens: 30000
      data_agent:
        model: "haiku"
        calls: 40
        tokens: 80000
      analysis_agent:
        model: "sonnet"
        calls: 20
        tokens: 60000
      valuation_agent:
        model: "haiku"
        calls: 15
        tokens: 40000
      insight_agent:
        model: "opus"
        calls: 10
        tokens: 25000
      synthesizer:
        model: "opus"
        calls: 5
        tokens: 15000

    total_cost: 2.10  # USD
    execution_time: "20 min"  # å¹¶è¡ŒåŠ é€Ÿ

    improvement:
      cost_reduction: "69%"
      time_reduction: "33%"

# ============================================================
# Agent é—´é€šä¿¡
# ============================================================
inter_agent_communication:

  message_format:
    from: "agent_id"
    to: "agent_id"
    type: "[request/response/status/error]"
    content:
      task: "ä»»åŠ¡æè¿°"
      data: "æ•°æ®/ç»“æœ"
      status: "[pending/running/completed/failed]"

  handoff_protocol:
    - step: 1
      action: "Coordinator å‘é€ä»»åŠ¡è¯·æ±‚"
    - step: 2
      action: "Target Agent ç¡®è®¤æ¥æ”¶"
    - step: 3
      action: "Target Agent æ‰§è¡Œä»»åŠ¡"
    - step: 4
      action: "Target Agent è¿”å›ç»“æœ"
    - step: 5
      action: "Coordinator éªŒè¯ç»“æœ"

  error_handling:
    on_timeout:
      - "é‡è¯• 1 æ¬¡"
      - "é™çº§åˆ°æ›´å¼ºæ¨¡å‹"
      - "é€šçŸ¥ Coordinator"

    on_failure:
      - "è®°å½•é”™è¯¯åˆ° attempt_tracker"
      - "å°è¯•å¤‡ç”¨æ–¹æ¡ˆ"
      - "å¿…è¦æ—¶äººå·¥å¹²é¢„"

# ============================================================
# å‘½ä»¤
# ============================================================
commands:

  multi_analyze:
    description: "ä½¿ç”¨ Multi-Agent è¿›è¡Œæ·±åº¦åˆ†æ"
    usage: "/multi-analyze {TICKER}"
    output: "å®Œæ•´æ·±åº¦æŠ¥å‘Š"

  agent_status:
    description: "æŸ¥çœ‹ Agent æ‰§è¡ŒçŠ¶æ€"
    usage: "/agent-status"
    output: "å„ Agent çŠ¶æ€é¢æ¿"

# ============================================================
# ç‰ˆæœ¬å†å²
# ============================================================
changelog:
  v1.0:
    date: "2026-01-31"
    changes:
      - "åˆå§‹ç‰ˆæœ¬"
      - "6 ä¸ªä¸“ä¸šåŒ– Agent"
      - "3 ç§ç¼–æ’æ¨¡å¼"
      - "æŠ•èµ„åˆ†æä»»åŠ¡åˆ†é…"
    references:
      - "OpenAI: Orchestrating Multiple Agents"
      - "Google ADK: Multi-Agent Systems"
      - "Gartner: 1445% Multi-Agent Inquiry Surge"
