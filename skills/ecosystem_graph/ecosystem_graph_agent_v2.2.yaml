# Ecosystem Graph Agent v2.2
# 生态系统图谱分析智能体

agent:
  id: ecosystem_graph_agent
  version: "2.2"
  name: "Ecosystem Graph Agent"
  description: "构建完整的生态系统图谱：玩家、流动、规则、竞争、替代、颠覆、邻接"

---

# 理论基础
theory_foundation:
  primary:
    - name: "Value Net"
      author: "Brandenburger & Nalebuff"
      application: "Skill1-2: 角色识别与流动映射"

    - name: "Five Forces"
      author: "Porter"
      application: "Skill3-4: 竞争表面与替代分析"

    - name: "Disruptive Innovation"
      author: "Christensen"
      application: "Skill5: 颠覆资格判定"

  secondary:
    - "Platform Economics"
    - "Jobs-to-be-Done"
    - "Constraint-Based Strategy"

---

# Skill 依赖图
skill_dependency:
  graph: |
    Skill1 (Role Map)
       ↓
    Skill2 (Flow & Rules)
       ↓
    Skill3 (Competition Surface)
       ↓
    Skill4 (Substitute Classifier)
       ↓
    Skill5 (Disruption Qualification)
       ↓
    Skill6 (Adjacency by Shared Constraint)

  execution_order: [1, 2, 3, 4, 5, 6]

  data_flow:
    skill1_to_skill2: ["player_ids", "roles"]
    skill2_to_skill3: ["chokepoints", "rule_owners"]
    skill3_to_skill4: ["competitor_list", "overlap_scores"]
    skill4_to_skill5: ["strong_substitutes", "trajectory"]
    skill5_to_skill6: ["true_disruptors", "foothold_type"]
    skill2_to_skill6: ["chokepoints", "rule_constraints"]

---

# 6 Core Skills
skills:
  - id: role_map_v2.2
    file: "role_map_v2.2.skill.md"
    position: 1
    purpose: "识别玩家、分配角色、提出Added Value假设"
    output: ["player_ids", "roles", "added_value_hypotheses"]

  - id: flow_rules_graph_v2.2
    file: "flow_rules_graph_v2.2.skill.md"
    position: 2
    purpose: "映射4类流动边 + 11类规则边 + 咽喉点"
    output: ["flows", "rules", "rule_owners", "chokepoints"]

  - id: competition_surface_v2.2
    file: "competition_surface_v2.2.skill.md"
    position: 3
    purpose: "量化5维度竞争表面与强度"
    output: ["competition_matrix", "ci_score", "hotspots"]

  - id: substitute_classifier_v2.2
    file: "substitute_classifier_v2.2.skill.md"
    position: 4
    purpose: "用6因素模型判定真正替代品"
    output: ["substitute_scores", "strong_substitutes", "crossover_timeline"]

  - id: disruption_qualification_v2.2
    file: "disruption_qualification_v2.2.skill.md"
    position: 5
    purpose: "严格判定颠覆资格（foothold + upmarket + disqualifiers）"
    output: ["disruption_scores", "true_disruptors", "false_alarms"]

  - id: adjacency_shared_constraint_v2.2
    file: "adjacency_shared_constraint_v2.2.skill.md"
    position: 6
    purpose: "识别共享约束创造的战略邻接机会"
    output: ["adjacency_opportunities", "strategic_map", "investment_implications"]

---

# 架构升级要点 (v2.2)
architecture_upgrades:
  rule_edge_expansion:
    description: "规则边从5类扩展至11类"
    categories:
      formal_rules: ["standards", "apis_protocols", "contracts_terms", "certifications", "regulations", "ip_patents"]
      platform_rules: ["platform_policies", "pricing_rules", "data_rights"]
      implicit_rules: ["network_lock_in", "habit_lock_in"]

  substitute_6_factors:
    description: "替代判断从4因素扩展至6因素"
    factors: ["same_job", "price_performance", "switching_cost", "ceiling_effect", "trajectory", "trigger_events"]
    gate: "same_job≥2为门槛条件"

  disruption_qualification:
    description: "颠覆判定增加严格资格检查"
    requirements:
      - foothold: "必须验证low_end或new_market立足点"
      - upmarket: "必须有向上攻击证据"
      - disqualifiers: "5个排除条件任一触发则判非颠覆"

  confidence_propagation:
    rule: "downstream_confidence ≤ min(upstream_confidences)"
    implementation: "每个skill输出confidence，下游不可高于上游最低值"

---

# 一致性检查
consistency_checks:
  role_flow_coverage:
    description: "Role Map中每个player必须在Flow Graph至少出现1条edge"
    on_fail: "ORPHAN_NODE warning → 返回补充或删除"

  substitute_same_job:
    description: "same_job<2不可判为替代"
    on_fail: "FAIL（逻辑错误）"

  disruption_requires_foothold:
    description: "无foothold不可判为颠覆"
    on_fail: "FAIL（逻辑错误）"

  chokepoint_in_constraints:
    description: "Skill2的chokepoints必须出现在Skill6的constraints"
    on_fail: "返回Skill6补充"

---

# 输入输出规范
io_spec:
  input:
    required:
      - target: "目标公司/产品/平台"
      - scope: "分析边界（行业/地区/价值链段）"
    optional:
      - known_players: "已知玩家列表"
      - focus_areas: "重点关注领域"

  output:
    ecosystem_graph:
      role_map: "玩家角色图"
      flow_rules_graph: "流动与规则图"
      competition_surface: "竞争表面分析"
      substitutes: "替代品分析"
      disruption: "颠覆者分析"
      adjacency: "战略邻接机会"

    scores:
      ci_score: "竞争强度评分"
      substitute_scores: "替代威胁评分"
      disruption_scores: "颠覆威胁评分"
      sa_scores: "战略邻接评分"

    strategic_implications:
      threats: "威胁识别"
      opportunities: "机会识别"
      investment_implications: "投资启示"

    metadata:
      aggregate_confidence: "整体置信度"
      evidence_refs: "证据来源"
      validation_queue: "待验证假设"

---

# 适用场景
use_cases:
  - scenario: "分析目标公司的生态位"
    skills_emphasized: [1, 2, 3]

  - scenario: "评估替代/颠覆威胁"
    skills_emphasized: [4, 5]

  - scenario: "寻找战略合作/并购机会"
    skills_emphasized: [2, 6]

  - scenario: "完整生态系统尽调"
    skills_emphasized: [1, 2, 3, 4, 5, 6]

---

# 版本历史
version_history:
  - version: "2.2"
    date: "2026-01-27"
    changes:
      - "规则边11类taxonomy"
      - "替代6因素模型（+trajectory, +trigger_events）"
      - "颠覆5个disqualifiers"
      - "置信度传递机制"
      - "4个一致性检查"

  - version: "2.0"
    date: "2026-01-25"
    changes:
      - "初始6-skill架构"
